(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"117":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return getPrefixCls})),n.d(t,"c",(function(){return getSystemInfo})),n.d(t,"d",(function(){return isString})),n.d(t,"e",(function(){return selectorQueryClientRect}));var r=n(271),c=n(293),s=null,a=500;function getPrefixCls(e){return"".concat("bf","-").concat(e)}function isString(e){return"string"==typeof e}function getSystemInfo(){return new Promise((function(e,t){s&&e(s),Object(r.a)().then((function(t){e(s=t)})).catch((function(e){return t(e)}))}))}function selectorQueryClientRect(e){return new Promise((function(t){Object(c.a)().select(e).boundingClientRect().exec((function(e){t(e)}))}))}},"120":function(e,t,n){"use strict";function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n}n.d(t,"a",(function(){return __rest}))},"213":function(e,t,n){},"214":function(e,t,n){},"294":function(e,t,n){"use strict";n.r(t);n(213);var r=n(21),c=n(29),s=n(15),a=n(120),o=n(116),u=n(117),i=n(118),l=n(17);var f=n(12);n(293);function scrollOffset(e){return new Promise((function(t){var n=e||document.documentElement||document.body;return t({"scrollLeft":n.scrollLeft,"scrollTop":n.scrollTop})}))}var b=["pulling","loosing","success"],d=function sleep(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},j=Object(u.b)("power-scroll-view");function PowerScrollView(e){var t,n,u=e.minTriggerTopDistance,p=void 0===u?150:u,O=e.headHeight,h=void 0===O?50:O,v=e.successDuration,g=void 0===v?500:v,x=e.animationDuration,m=void 0===x?300:x,T=e.pullDistance,w=void 0===T?e.refresherThreshold||e.pullDistance:T,_=e.renderHead,S=e.successText,k=void 0===S?"刷新成功":S,y=e.children,L=e.loadingText,C=void 0===L?"加载中...":L,R=e.loosingText,D=void 0===R?"释放即可刷新...":R,M=e.pullingText,P=void 0===M?"下拉即可刷新...":M,N=e.onScroll,Y=e.scrollTop,E=e.finishedText,H=void 0===E?"没有更多了":E,$=e.renderFinished,z=e.renderLoading,F=e.finished,X=e.renderError,V=e.errorText,U=e.total,q=e.current,I=e.pageSize,A=void 0===I?20:I,J=(e.upperThreshold,e.lowerThreshold),Q=void 0===J?e.lowerThreshold||250:J,B=e.refresherEnabled,G=void 0===B?null===(t=e.refresherEnabled)||void 0===t||t:B,K=e.onScrollToLower,W=void 0===K?e.onScrollToLower:K,Z=e.onScrollToUpper,ee=void 0===Z?e.onScrollToUpper:Z,te=e.scrollY,ne=void 0===te?null===(n=e.scrollY)||void 0===n||n:te,re=e.className,ce=e.header,se=e.footer,ae=Object(a.a)(e,["minTriggerTopDistance","headHeight","successDuration","animationDuration","pullDistance","renderHead","successText","children","loadingText","loosingText","pullingText","onScroll","scrollTop","finishedText","renderFinished","renderLoading","finished","renderError","errorText","total","current","pageSize","upperThreshold","lowerThreshold","refresherEnabled","onScrollToLower","onScrollToUpper","scrollY","className","header","footer"]),oe=Object(l.useRef)(0),ue=Object(l.useRef)(!0),ie=Object(l.useRef)({"page":0,"pageSize":A}),le=Object(l.useState)(0),fe=Object(s.a)(le,2),be=fe[0],de=fe[1],je=Object(l.useState)(0),pe=Object(s.a)(je,2),Oe=pe[0],he=pe[1],ve=Object(l.useState)(!1),ge=Object(s.a)(ve,2),xe=ge[0],me=ge[1],Te=Object(l.useState)(F||!1),we=Object(s.a)(Te,2),_e=we[0],Se=we[1],ke=Object(l.useState)("normal"),ye=Object(s.a)(ke,2),Le=ye[0],Ce=ye[1],Re=null!=q?q:Array.from(y).length,De=function useTouch(){var e=Object(l.useRef)(0),t=Object(l.useRef)(0),n=Object(l.useRef)(0),r=Object(l.useRef)(0),c=Object(l.useRef)(0),s=Object(l.useRef)(0),a=Object(l.useRef)(""),o=function reset(){n.current=0,r.current=0,c.current=0,s.current=0,a.current=""};return{"move":function move(o){var u=o.touches[0];n.current=u.clientX<0?0:u.clientX-e.current,r.current=u.clientY-t.current,c.current=Math.abs(n.current),s.current=Math.abs(r.current),a.current||(a.current=function getDirection(e,t){return e>t&&e>10?"horizontal":t>e&&t>10?"vertical":""}(c.current,s.current))},"start":function start(n){o(),e.current=n.touches[0].clientX,t.current=n.touches[0].clientY},"reset":o,"startX":e,"startY":t,"deltaX":n,"deltaY":r,"offsetX":c,"offsetY":s,"direction":a,"isVertical":function isVertical(){return"vertical"===a.current},"isHorizontal":function isHorizontal(){return"horizontal"===a.current}}}(),Me=Object(l.useRef)(),Pe=Object(l.useRef)(!1),Ne=Object(l.useRef)(!1),Ye=Object(l.useRef)(0);Object(l.useEffect)((function(){var e=ie.current.pageSize;if(Re<=e&&(ie.current.page=1,Se(!1)),void 0===F){if(void 0===U){var t=Re-Ye.current;return(0===Re||0!==Ye.current&&t>-1&&t<ie.current.pageSize)&&Se(!0),void(Ye.current=Re)}Se(Re>=U)}else Se(F)}),[U,Re,F]);var Ee=Object(l.useCallback)((function(){return"loading"!==Le&&"success"!==Le&&G&&!Pe.current}),[G,Le]),He=Object(l.useCallback)(function(){var e=Object(c.a)(Object(r.a)().mark((function _callee(e){return Object(r.a)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:ue.current&&(he(0),De.start(e));case 1:case"end":return t.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}(),[De]),$e=Object(l.useMemo)((function(){return{"transitionDuration":"".concat(Oe,"ms"),"transform":be?"translate3d(0,".concat(be,"px, 0)"):""}}),[be,Oe]),ze=Object(l.useCallback)(Object(c.a)(Object(r.a)().mark((function _callee2(){var e,t;return Object(r.a)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,scrollOffset(Me.current);case 2:return e=n.sent,t=e.scrollTop,n.abrupt("return",t);case 5:case"end":return n.stop()}}),_callee2)}))),[]),Fe=Object(l.useCallback)((function(e){var t=+(w||h);return e>t&&(e=e<2*t?t+(e-t)/2:1.5*t+(e-2*t)/4),Math.round(e)}),[h,w]),Xe=Object(l.useCallback)((function(e,t){var n=+(w||h);de(e),t?(Ce("loading"),Pe.current=!0):Ce(0===e?"normal":e<n?"pulling":"loosing")}),[h,w]),Ve=Object(l.useCallback)(Object(c.a)(Object(r.a)().mark((function _callee3(){return Object(r.a)().wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return Ce("success"),e.next=3,d(+g);case 3:case"end":return e.stop()}}),_callee3)}))),[g]),Ue=Object(l.useCallback)(Object(c.a)(Object(r.a)().mark((function _callee4(){var e;return Object(r.a)().wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Ne.current=!1,Xe(+h,!0),me(!1),ie.current.page=1,e=void 0===U?0:ie.current,t.next=8,null==ee?void 0:ee(e);case 8:if(he(+m),!k&&!(null==_?void 0:_({"status":"success","distance":be}))){t.next=12;break}return t.next=12,Ve().catch((function(e){return null}));case 12:return t.prev=12,Xe(0,!1),Pe.current=!1,t.finish(12);case 16:case"end":return t.stop()}}),_callee4,null,[[0,,12,16]])}))),[m,be,h,ee,_,Xe,Ve,k,U]),qe=Object(l.useCallback)(function(){var e=Object(c.a)(Object(r.a)().mark((function _callee5(e){var t;return Object(r.a)().wrap((function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:if(!Ee()){n.next=6;break}return n.next=3,ze().catch((function(e){return 0}));case 3:t=n.sent,oe.current=t,He(e);case 6:case"end":return n.stop()}}),_callee5)})));return function(t){return e.apply(this,arguments)}}(),[He,ze,Ee]),Ie=Object(l.useCallback)((function(e){if(Ee()&&oe.current<p){var t=De.deltaY;De.move(e),ue.current&&t.current>=0&&De.isVertical()&&(!function preventDefault(e,t){e.preventDefault(),t&&function stopPropagation(e){e.stopPropagation()}(e)}(e,!0),Xe(Fe(t.current)))}}),[Fe,Ee,p,Xe,De]),Ae=Object(l.useCallback)((function(){ue.current&&De.deltaY.current&&Ee()?(he(+m),"loosing"===Le?Ue():Xe(0)):Xe(0)}),[Ue,Ee,m,Xe,Le,De.deltaY]),Je=Object(l.useMemo)((function(){return function debounce(e,t){var n=0,r=null,c=function ret(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];r=s,clearTimeout(n),n=setTimeout((function(){r=null,e.apply(void 0,s)}),t)};return c.flush=function(){if(clearTimeout(n),r){var t=r;return r=null,e.apply(void 0,Object(f.a)(t))}},c}(function(){var e=Object(c.a)(Object(r.a)().mark((function _callee6(){var e;return Object(r.a)().wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze();case 2:return e=t.sent,ue.current=e<=0,t.abrupt("return",e);case 5:case"end":return t.stop()}}),_callee6)})));return function _getScrollTop(){return e.apply(this,arguments)}}(),200)}),[ze]),Qe=Object(l.useCallback)((function(e){null==N||N(e),Je()}),[Je,N]),Be=Object(l.useCallback)((function(){return _e||"normal"!==Le||Pe.current||Ne.current}),[_e,Le]),Ge=Object(l.useCallback)(Object(c.a)(Object(r.a)().mark((function _callee7(){var e;return Object(r.a)().wrap((function _callee7$(t){for(;;)switch(t.prev=t.next){case 0:if(!Be()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,Pe.current=!0,ie.current.page+=1,e=void 0===U?Re:ie.current,t.next=8,null==W?void 0:W(e);case 8:t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),ie.current.page-=1,Ne.current=!0,me(!0);case 15:return t.prev=15,Pe.current=!1,t.finish(15);case 18:case"end":return t.stop()}}),_callee7,null,[[2,10,15,18]])}))),[Re,Be,W,U]),Ke=Object(l.useMemo)((function(){return 50!==h?{"height":"".concat(h,"px")}:""}),[h]),We=Object(l.useMemo)((function(){return"loading"===Le?C:"loosing"===Le?D:"pulling"===Le?P:"success"===Le?k:""}),[C,D,P,Le,k]),Ze=Object(l.useMemo)((function(){if(_e){var e=$||H;if(e)return Object(o.jsx)(i.s,Object.assign({"className":"finished-text"},{"children":e}))}return null}),[_e,$,H]),et=Object(l.useCallback)((function(){me(!1),Ne.current=!1,Ge()}),[Ge]),tt=Object(l.useMemo)((function(){if(xe){var e=X||V;if(e)return Object(o.jsx)(i.s,Object.assign({"className":"error-text","onClick":et},{"children":e}))}return null}),[et,xe,V,X]),nt=Object(l.useMemo)((function(){return!_e&&ne&&W?Object(o.jsx)(i.s,Object.assign({"className":"loading"},{"children":z||Object(o.jsx)(i.s,{"children":C})})):null}),[_e,C,ne,z]),rt=Object(l.useMemo)((function(){return _e&&0===Re?Object(o.jsx)(i.s,Object.assign({"className":"text"},{"children":"没有内容"})):xe?tt:_e?Ze:nt}),[_e,Re,xe,nt,tt,Ze]),ct=Object(l.useMemo)((function(){var e=null==_?void 0:_({"status":Le,"distance":be});return e||(b.includes(Le)?Object(o.jsx)(i.s,Object.assign({"className":"text"},{"children":We})):"loading"===Le?Object(o.jsx)(i.s,Object.assign({"className":"loading"},{"children":We})):"")}),[be,We,Le,_]),st=Object(o.jsx)(i.s,Object.assign({"className":"head","style":Ke},{"children":ct}));return Object(o.jsxs)(i.s,Object.assign({"className":j},{"children":[ce&&Object(o.jsx)(i.s,Object.assign({"className":"custom-header"},{"children":ce})),Object(o.jsx)(i.l,Object.assign({"ref":Me,"lowerThreshold":Q,"onScroll":Qe,"scrollTop":Y,"onScrollToLower":Ge,"scrollY":ne,"className":"custom-content ".concat(re||"")},ae,{"children":Object(o.jsxs)(i.s,Object.assign({"style":$e,"onTouchMove":Ie,"onTouchEnd":Ae,"onTouchCancel":Ae,"onTouchStart":qe},{"children":[st,y,Object(o.jsx)(i.s,{"style":{"height":0,"pointerEvents":"none"}}),rt]}))})),se&&Object(o.jsx)(i.s,Object.assign({"className":"custom-footer"},{"children":se}))]}))}var p=n(18),O=(n(214),function(){var e=Object(c.a)(Object(r.a)().mark((function _callee(e,t,n){var c,s,a,o;return Object(r.a)().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(c=function sleep(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},100,s=e,t&&(s=0),!(s>=100)){r.next=6;break}return r.abrupt("return",[]);case 6:return console.log("".concat(n,":请求~"),"isRefresh:",t),r.next=9,c(1200);case 9:for(a=[],o=0;o<20;o++)a.push("".concat(n,":"));return r.abrupt("return",a);case 12:case"end":return r.stop()}}),_callee)})));return function mockRequest(t,n,r){return e.apply(this,arguments)}}());t.default=function(){var e=Object(l.useState)({"basicsList":[],"basicsFinished":!1}),t=Object(s.a)(e,2),n=t[0],a=t[1],u=function setState(e){a(Object(p.a)(Object(p.a)({},n),e))},b=function(){var e=Object(c.a)(Object(r.a)().mark((function _callee2(){var e,t=arguments;return Object(r.a)().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:0,r.next=3,O(n.basicsList.length,!0,"基础用法");case 3:e=r.sent,u({"basicsList":e.map((function(e,t){return Object(o.jsxs)(i.s,{"style":{"height":"40px","lineHeight":"40px"},"children":[e,Object(o.jsx)(i.q,{"children":"index:".concat(n.basicsList.length+t+1)})]},"".concat(n.basicsList.length+t,"append"))})),"basicsFinished":0===e.length});case 5:case"end":return r.stop()}}),_callee2)})));return function basicsDoRefresh(){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(Object(r.a)().mark((function _callee3(){var e,t,c=arguments;return Object(r.a)().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:0,e=c.length>1&&void 0!==c[1]&&c[1],r.next=4,O(n.basicsList.length,e,"基础用法");case 4:t=(t=r.sent).map((function(e,t){return Object(o.jsxs)(i.s,{"style":{"height":"40px","lineHeight":"40px"},"children":[e,Object(o.jsx)(i.q,{"children":"index:".concat(n.basicsList.length+t+1)})]},"".concat(n.basicsList.length+t,"append"))})),u({"basicsList":[].concat(Object(f.a)(n.basicsList),Object(f.a)(t)),"basicsFinished":0===t.length});case 7:case"end":return r.stop()}}),_callee3)})));return function basicsLoadMore(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){d()}),[]),Object(o.jsx)(o.Fragment,{"children":Object(o.jsx)(PowerScrollView,{"finishedText":"没有更多了","successText":"刷新成功","onScrollToUpper":b,"onScrollToLower":d,"current":n.basicsList.length,"finished":n.basicsFinished,"header":Object(o.jsx)(i.s,{"style":{"lineHeight":"50px"},"children":"Head"}),"footer":Object(o.jsx)(i.s,{"style":{"lineHeight":"50px"},"children":"Footer"}),"lowerThreshold":300,"children":n.basicsList.map((function(e,t){return Object(o.jsx)(i.s,{"children":e},t)}))})})}}}]);